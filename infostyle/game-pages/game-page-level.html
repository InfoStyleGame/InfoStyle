<polymer-element name="game-page-level" attributes="level isActive">
	<link rel="import" href="/Controls/ist-level.html">
	<link rel="import" href="/Scripts/polymer/paper-button/paper-button.html">
	<template>
		<div id="levelContainer"></div>
		<paper-button hidden id="exitButton" on-click="{{goToMap}}">Вернуться на карту</paper-button>
	</template>
    <script>
    	Polymer({
    		isActiveChanged: function () {
    			if (this.isActive)
    				this.activate();
    			else
					this.reset();
    		},

			reset: function() {
				this.$.levelContainer.innerHTML = '';
			},

    		activate: function() {
    			var el = document.createElement("ist-level");
    			el.level = this.level;
				el.addEventListener('levelComplete', this.onLevelComplete)
    			this.$.levelContainer.appendChild(el);
    		},

			onLevelComplete: function() {
				this.$.exitButton.removeAttribute('hidden');
			},

			goToMap: function () {
				this.$.exitButton.hidden = '';
				this.isActive = false;
				window.location.hash = "map";
			}
    	});
    </script>
</polymer-element>