<polymer-element name="game-pages">
	<link rel="import" href="/Scripts/polymer/core-animated-pages/core-animated-pages.html">
	<link rel="import" href="/Scripts/polymer/flatiron-director/flatiron-director.html">
	<link rel="import" href="/game-pages/game-page-login.html">
	<link rel="import" href="/game-pages/game-page-map.html">
	<link rel="import" href="/game-pages/game-page-level.html">
	<link rel="import" href="/game-pages/game-page-error.html">
	<template id="mainTemplate">
		<style>
			.container {
				max-width: 1000px;
				margin: 0 auto;
			}	
		</style>
		<core-animated-pages valueattr="hash" selected="{{page}}" class="container" fit>
			<section hash="login" layout vertical center>
				<game-page-login id="game-page-login"></game-page-login>
			</section>
			<section hash="map" layout vertical center>
				<game-page-map id="game-page-map"></game-page-map>
			</section>
			<section hash="level" layout vertical center>
				<game-page-level id="game-page-level"></game-page-level>
			</section>
			<section hash="error" layout vertical center>
				<game-page-error id="game-page-error"></game-page-error>
			</section>
		</core-animated-pages>
		<flatiron-director id="flatironDirector" route="{{route}}" autoHash></flatiron-director>
	</template>
	<script>
		Polymer({
			ready: function () {
				var element = this;
				this.route = this.route || 'login';
				this.$.flatironDirector.addEventListener('director-route', function(route) {
					if (route.detail.indexOf('level') == 0) {
						element.page = 'level';
						var levelNumber = route.detail.substr(6);
						element.$["game-page-level"].level = levelNumber;
						element.$["game-page-level"].isActive = true;
					} else {
						element.page = route.detail;
						element.$["game-page-level"].isActive = false;
					}
				})
			}
		});
	</script>
</polymer-element>